---
- hosts: all
  become: yes


  vars:
    node_apps_location: /usr/local/opt/node

  tasks:
    - name: Install EPEL repo.
      dnf:
        name: epel-release
        state: present
    
    - name: Import Remi GPG key.
      rpm_key:
        key: "https://rpms.remirepo.net/RPM-GPG-KEY-remi2018"
        state: present
    
    - name: Install Remi repo
      dnf:
        name: "https://rpms.remirepo.net/enterprise/remi-release-8.rpm"
        state: present

    - name: Disabling firewalld
      service:
        name: firewalld
        state: stopped

    - name: Install nodejs and npm
      dnf:
        name: npm
        state: present
        enablerepo: epel

    - name: Install Forever (to run our nodejs app)
      npm:
        name: forever
        global: yes
        state: present

